# 游戏本体

## 模块

* 主应用程序类 `GomokuApplication.java`
  * main函数启动程序
* 游戏控制器类（尝试通过RESTful API[^1]实现，实现不了再换成控制台或文件操作） `GameController.java`
  * `private Map<Integer, Gomoku> chessboards = new HashMap<>();`
  * 创建五子棋棋盘, 开始新一轮游戏 `+ String createNewGomoku(Gomoku gomoku)`
  * json数据输入
    * ~~从控制台或文件 input.json 读取数据 /~~ 
    * 通过 RESTful API[^1] 输入数据并创建新的棋盘 
      * `+ String createChessboard(int id)`
      * `+ String createChessboard(int id,int x,int y)`
    * 通过 RESTful API[^1] 输入数据并通过五子棋模型类的方法落子 
      * `+ String updateChessboard(int id,int x,int y,int player)` id为棋局id, x、y为落子位置，player为1时黑子落子，-1时为白子落子
      * `+ String updateChessboard(String chessboard)` 传入修改后的棋盘落子JSON
  * json棋盘输出
    * ~~输出到控制台或文件 output.json /~~ 
    * 通过 RESTful API[^1] 获取JSON数据
      * 棋盘数据 `+ String getChessboard()`
      * 游戏状态 `+ String getChessStatus()`
  
* 五子棋的模型类 `Gomoku.java`
  * 数组存储棋盘数据（可自定义棋盘大小，默认9*9） `Gomoku()` `Gomoku(int x,int y)`
  * 判断数据输入是否符合游戏规则（比如相比原棋盘只有一处修改）`bool checkUpdate()`
  * 获取游戏状态 
    * 判断胜负  `int checkWinner()` 输出1为黑子赢，-1为白子赢，0为胜负未分，2为平局（棋盘下满了）
    * 轮到谁出  `int checkPlayerNow()` 输出1为轮到黑子出，-1为轮到白子出，用成员变量存储上一轮是谁出棋再判断
  * 获取棋盘：`int [][] getChessboard()` 输出数组
  * 落子：修改数组（修改前先判断数据输入是否符合游戏规则） `bool updateChess(int x,int y,int player)` 输出结果落子成功true/失败false

### 分工
* 罗展彬：主应用程序类、游戏控制器类
* 易雨杰：五子棋的模型类

### 棋盘表示
使用 `n×n` 整型数组表示棋盘状态：
- `0`：空白位置
- `1`：黑子落子
- `-1`：白子落子


**JSON棋盘状态输出**：
```json
{
  "board": [
    [0, 0, 0, 0, 0, 0],
    [0, 0, 1, 0, 0, 0],
    [0, 0, -1, 1, 0, 0],
    [0, 0, -1, 0, 1, 0],
    [0, 0, -1, 0, 0, 1],
    [0, 0, 0, 0, 0, 0]
  ]
}
```

**JSON游戏状态输出**：
```json
{
  "GameWinner": 0, //1为黑子赢，-1为白子赢，0为胜负未分，2为平局（棋盘下满了）
  "NextPlayer": 1  //1为轮到黑子出，-1为轮到白子出
}
```

---
对于JSON在JAVA中的使用，可以参考 https://www.runoob.com/w3cnote/java-json-instro.html

实现一个简单的RESTful API，可以参考 https://www.cnblogs.com/happy-coding/p/18705679

[^1]: https://www.cnblogs.com/happy-coding/p/18705679 